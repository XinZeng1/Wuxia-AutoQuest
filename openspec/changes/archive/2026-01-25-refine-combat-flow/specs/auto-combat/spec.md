## MODIFIED Requirements

### Requirement: 战斗等待能力（MVP核心）
系统 SHALL 能够等待战斗自动完成，无需执行任何战斗操作。系统 SHALL 每秒检测一次战斗状态，直到战斗结束。系统 SHALL 在点击怪物后等待配置的时间让角色走向怪物，然后进行多次战斗状态检测（增加重试机制），避免过早返回探索状态。

#### Scenario: 等待战斗完成
- **WHEN** 检测到进入战斗状态
- **THEN** 每秒检测一次战斗状态
- **AND** 持续监控界面直到战斗结束（返回地图界面）
- **AND** 不执行任何战斗操作（战斗自动进行）

#### Scenario: 战斗超时处理
- **WHEN** 检测到进入战斗状态
- **AND** 战斗持续时间超过配置的超时时间
- **THEN** 记录超时警告并尝试继续或停止

#### Scenario: 点击后等待并检测战斗
- **WHEN** 点击怪物后
- **AND** 等待配置的时间（1-2秒）让角色走向怪物
- **THEN** 进行第一次战斗状态检测
- **AND** 如果未检测到战斗状态，再等待1秒后进行第二次检测
- **AND** 如果仍未检测到战斗状态，再等待1秒后进行第三次检测
- **AND** 只有三次检测都失败时才返回探索状态

### Requirement: 战斗结果检测能力（MVP简化版）
系统 SHALL 能够检测战斗是否结束，用于继续探索流程。战斗结束后，系统 SHALL 自动重新检测是否有怪物。系统 SHALL 在探索状态中，如果探索度检测失败，先检查战斗状态，避免在战斗状态下误判为探索状态。

#### Scenario: 检测战斗结束
- **WHEN** 战斗进行中
- **AND** 界面从战斗场景切换回地图探索场景
- **THEN** 返回战斗结束状态
- **AND** 自动重新检测是否有怪物

#### Scenario: 检测战斗进行中
- **WHEN** 界面仍显示战斗场景
- **AND** 每秒检测一次战斗状态
- **THEN** 返回战斗进行中状态，继续等待

#### Scenario: 探索状态中检测战斗
- **WHEN** 处于探索状态
- **AND** 探索度检测失败
- **THEN** 先检查是否在战斗中
- **AND** 如果在战斗中，立即进入战斗状态
- **AND** 如果不在战斗中，继续探索流程
