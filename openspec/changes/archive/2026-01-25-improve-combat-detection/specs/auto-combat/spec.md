## MODIFIED Requirements

### Requirement: 战斗状态检测能力（MVP简化版）
系统 SHALL 能够检测是否已进入战斗界面，用于等待战斗自动完成。系统 SHALL 支持使用OCR识别"认输"文字来检测战斗状态，也支持使用模板匹配作为备选方法。

#### Scenario: 使用OCR检测进入战斗
- **WHEN** 分析当前界面
- **AND** 使用OCR识别屏幕右边区域的文字
- **AND** 识别到"认输"文字
- **THEN** 返回战斗状态为真

#### Scenario: 使用模板匹配检测进入战斗
- **WHEN** 分析当前界面
- **AND** 使用模板匹配检测战斗界面特征
- **AND** 匹配成功
- **THEN** 返回战斗状态为真

#### Scenario: 检测非战斗状态
- **WHEN** 分析当前界面
- **AND** OCR未识别到"认输"文字
- **AND** 模板匹配也未检测到战斗界面
- **THEN** 返回战斗状态为假

### Requirement: 战斗等待能力（MVP核心）
系统 SHALL 能够等待战斗自动完成，无需执行任何战斗操作。系统 SHALL 每秒检测一次战斗状态，直到战斗结束。

#### Scenario: 等待战斗完成
- **WHEN** 检测到进入战斗状态
- **THEN** 每秒检测一次战斗状态
- **AND** 持续监控界面直到战斗结束（返回地图界面）
- **AND** 不执行任何战斗操作（战斗自动进行）

#### Scenario: 战斗超时处理
- **WHEN** 检测到进入战斗状态
- **AND** 战斗持续时间超过配置的超时时间
- **THEN** 记录超时警告并尝试继续或停止

### Requirement: 战斗结果检测能力（MVP简化版）
系统 SHALL 能够检测战斗是否结束，用于继续探索流程。战斗结束后，系统 SHALL 自动重新检测是否有怪物。

#### Scenario: 检测战斗结束
- **WHEN** 战斗进行中
- **AND** 界面从战斗场景切换回地图探索场景
- **THEN** 返回战斗结束状态
- **AND** 自动重新检测是否有怪物

#### Scenario: 检测战斗进行中
- **WHEN** 界面仍显示战斗场景
- **AND** 每秒检测一次战斗状态
- **THEN** 返回战斗进行中状态，继续等待

## ADDED Requirements

### Requirement: 战斗检测区域配置能力
系统 SHALL 支持配置战斗状态检测区域，用于OCR识别"认输"文字。

#### Scenario: 配置检测区域
- **WHEN** 用户配置战斗检测区域
- **THEN** 系统在指定区域进行OCR识别
- **AND** 识别"认输"文字来判断战斗状态

#### Scenario: 默认检测区域
- **WHEN** 未配置检测区域
- **THEN** 系统使用默认区域（屏幕右边）
- **AND** 进行OCR识别

### Requirement: 点击后等待时间配置能力
系统 SHALL 支持配置点击怪物后的等待时间，让角色有时间走向怪物。

#### Scenario: 配置等待时间
- **WHEN** 点击怪物后
- **AND** 配置了等待时间（1-2秒）
- **THEN** 等待指定时间让角色走向怪物
- **AND** 然后检测是否进入战斗
